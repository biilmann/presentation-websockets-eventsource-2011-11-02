<!doctype html>
<head>
  <title>WebSockets</title>
</head>

<h1>WebSockets</h1>
<div id="output"></div>

<script>

  var output = document.getElementById("output");
  var append = function(msg) {
    var p = document.createElement("p");
    p.appendChild(document.createTextNode(msg));
    output.appendChild(p);
  }

  var ws = new WebSocket("ws://localhost:1337/ws");
  ws.onopen = function() {
    append("Socket open");
  }
  ws.onmessage = function(msg) {
    append(msg.data);
    ws.send("Got your message: " + msg.data);
  }
  ws.onerror = function() {}
  ws.onclose = function() {}

</script>
